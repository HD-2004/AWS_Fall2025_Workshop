<!doctype html><html lang=vi class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.134.3"><meta name=description content><meta name=author content="hieudhse184340@fpt.edu.vn"><link rel=icon href=../../../images/favicon.png type=image/png><title>Blog 3 :: Báo cáo thực tập</title> <link href=../../../css/nucleus.css?1765279076 rel=stylesheet><link href=../../../css/fontawesome-all.min.css?1765279076 rel=stylesheet><link href=../../../css/hybrid.css?1765279076 rel=stylesheet><link href=../../../css/featherlight.min.css?1765279076 rel=stylesheet><link href=../../../css/perfect-scrollbar.min.css?1765279076 rel=stylesheet><link href=../../../css/auto-complete.css?1765279076 rel=stylesheet><link href=../../../css/atom-one-dark-reasonable.css?1765279076 rel=stylesheet><link href=../../../css/theme.css?1765279076 rel=stylesheet><link href=../../../css/hugo-theme.css?1765279076 rel=stylesheet><link href=../../../css/theme-workshop.css?1765279076 rel=stylesheet><script src=../../../js/jquery-3.3.1.min.js?1765279076></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=../../../vi/3-blogstranslated/3.3-blog3/><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><a id=logo href=../../../><svg id="Layer_1" data-name="Layer 1" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff}.cls-2{fill:#f90;fill-rule:evenodd}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09 10.85a4.7 4.7.0 00.19 1.48 7.73 7.73.0 00.54 1.19.77.77.0 01.12.38.64.64.0 01-.32.49l-1 .7a.83.83.0 01-.44.15.69.69.0 01-.49-.23 3.8 3.8.0 01-.6-.77q-.25-.42-.51-1a6.14 6.14.0 01-4.89 2.3 4.54 4.54.0 01-3.32-1.19 4.27 4.27.0 01-1.22-3.2 4.28 4.28.0 011.46-3.4A6.06 6.06.0 017.69 6.46a12.47 12.47.0 011.76.13q.92.13 1.91.36V5.73a3.65 3.65.0 00-.79-2.66A3.81 3.81.0 007.86 2.3a7.71 7.71.0 00-1.79.22 12.78 12.78.0 00-1.79.57 4.55 4.55.0 01-.58.22h-.26q-.35.0-.35-.52V2a1.09 1.09.0 01.12-.58 1.2 1.2.0 01.47-.35A10.88 10.88.0 015.77.32 10.19 10.19.0 018.36.0a6 6 0 014.35 1.35 5.49 5.49.0 011.38 4.09zM7.34 13.38a5.36 5.36.0 001.72-.31A3.63 3.63.0 0010.63 12 2.62 2.62.0 0011.19 11a5.63 5.63.0 00.16-1.44v-.7a14.35 14.35.0 00-1.53-.28 12.37 12.37.0 00-1.56-.1 3.84 3.84.0 00-2.47.67A2.34 2.34.0 005 11a2.35 2.35.0 00.61 1.76A2.4 2.4.0 007.34 13.38zm13.35 1.8a1 1 0 01-.64-.16 1.3 1.3.0 01-.35-.65L15.81 1.51a3 3 0 01-.15-.67.36.36.0 01.41-.41H17.7a1 1 0 01.65.16 1.4 1.4.0 01.33.65l2.79 11 2.59-11A1.17 1.17.0 0124.39.6a1.1 1.1.0 01.67-.16H26.4a1.1 1.1.0 01.67.16 1.17 1.17.0 01.32.65L30 12.39 32.88 1.25A1.39 1.39.0 0133.22.6a1 1 0 01.65-.16h1.54a.36.36.0 01.41.41 1.36 1.36.0 010 .26 3.64 3.64.0 01-.12.41l-4 12.86a1.3 1.3.0 01-.35.65 1 1 0 01-.64.16H29.25a1 1 0 01-.67-.17 1.26 1.26.0 01-.32-.67L25.67 3.64l-2.56 10.7a1.26 1.26.0 01-.32.67 1 1 0 01-.67.17zm21.36.44a11.28 11.28.0 01-2.56-.29 7.44 7.44.0 01-1.92-.67 1 1 0 01-.61-.93v-.84q0-.52.38-.52a.9.9.0 01.31.06l.42.17a8.77 8.77.0 001.83.58 9.78 9.78.0 002 .2 4.48 4.48.0 002.43-.55 1.76 1.76.0 00.86-1.57 1.61 1.61.0 00-.45-1.16A4.29 4.29.0 0043 9.22l-2.41-.76A5.15 5.15.0 0138 6.78a3.94 3.94.0 01-.83-2.41 3.7 3.7.0 01.45-1.85 4.47 4.47.0 011.19-1.37 5.27 5.27.0 011.7-.86A7.4 7.4.0 0142.6.0a8.87 8.87.0 011.12.07q.57.07 1.08.19t.95.26a4.27 4.27.0 01.7.29 1.59 1.59.0 01.49.41.94.94.0 01.15.55v.79q0 .52-.38.52a1.76 1.76.0 01-.64-.2 7.74 7.74.0 00-3.2-.64 4.37 4.37.0 00-2.21.47 1.6 1.6.0 00-.79 1.48 1.58 1.58.0 00.49 1.18 4.94 4.94.0 001.83.92L44.55 7a5.08 5.08.0 012.57 1.6A3.76 3.76.0 0147.9 11a4.21 4.21.0 01-.44 1.93 4.4 4.4.0 01-1.21 1.47 5.43 5.43.0 01-1.85.93A8.25 8.25.0 0142.05 15.62z"/><path class="cls-2" d="M45.19 23.81C39.72 27.85 31.78 30 25 30A36.64 36.64.0 01.22 20.57c-.51-.46-.06-1.09.56-.74A49.78 49.78.0 0025.53 26.4 49.23 49.23.0 0044.4 22.53C45.32 22.14 46.1 23.14 45.19 23.81z"/><path class="cls-2" d="M47.47 21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74 3.13-2.2 8.27-1.57 8.86-.83s-.16 5.89-3.09 8.35c-.45.38-.88.18-.68-.32C46.69 25.8 48.17 22.11 47.47 21.21z"/></svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label> <input data-search-input id=search-by type=search placeholder=Search...> <span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=../../../js/lunr.min.js?1765279076></script><script type=text/javascript src=../../../js/auto-complete.js?1765279076></script><script type=text/javascript>var baseurl="https://hd-2004.github.io/AWS_Fall2025_Workshop//vi"</script><script type=text/javascript src=../../../js/search.js?1765279076></script></div><div class=highlightable><ul class=topics><li data-nav-id=/vi/1-worklog/ title="Nhật ký công việc" class=dd-item><a href=../../../vi/1-worklog/><b>1. </b>Nhật ký công việc
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/1-worklog/1.1-week1/ title="Worklog Tuần 1" class=dd-item><a href=../../../vi/1-worklog/1.1-week1/><b>1.1. </b>Worklog Tuần 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.2-week2/ title="Worklog Tuần 2" class=dd-item><a href=../../../vi/1-worklog/1.2-week2/><b>1.2. </b>Worklog Tuần 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.3-week3/ title="Worklog Tuần 3" class=dd-item><a href=../../../vi/1-worklog/1.3-week3/><b>1.3. </b>Worklog Tuần 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.4-week4/ title="Worklog Tuần 4" class=dd-item><a href=../../../vi/1-worklog/1.4-week4/><b>1.4. </b>Worklog Tuần 4
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.5-week5/ title="Worklog Tuần 5" class=dd-item><a href=../../../vi/1-worklog/1.5-week5/><b>1.5. </b>Worklog Tuần 5
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.6-week6/ title="Worklog Tuần 6" class=dd-item><a href=../../../vi/1-worklog/1.6-week6/><b>1.6. </b>Worklog Tuần 6
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.7-week7/ title="Worklog Tuần 7" class=dd-item><a href=../../../vi/1-worklog/1.7-week7/><b>1.7. </b>Worklog Tuần 7
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.8-week8/ title="Worklog Tuần 8" class=dd-item><a href=../../../vi/1-worklog/1.8-week8/><b>1.8. </b>Worklog Tuần 8
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.9-week9/ title="Worklog Tuần 9" class=dd-item><a href=../../../vi/1-worklog/1.9-week9/><b>1.9. </b>Worklog Tuần 9
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.10-week10/ title="Worklog Tuần 10" class=dd-item><a href=../../../vi/1-worklog/1.10-week10/><b>1.10. </b>Worklog Tuần 10
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.11-week11/ title="Worklog Tuần 11" class=dd-item><a href=../../../vi/1-worklog/1.11-week11/><b>1.11. </b>Worklog Tuần 11
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.12-week12/ title="Worklog Tuần 12" class=dd-item><a href=../../../vi/1-worklog/1.12-week12/><b>1.12 </b>Worklog Tuần 12
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/2-proposal/ title="Bản đề xuất" class=dd-item><a href=../../../vi/2-proposal/><b>2. </b>Bản đề xuất
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/ title="Các bài blogs đã dịch" class="dd-item
parent"><a href=../../../vi/3-blogstranslated/><b>3. </b>Các bài blogs đã dịch
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/3-blogstranslated/3.1-blog1/ title="Blog 1" class=dd-item><a href=../../../vi/3-blogstranslated/3.1-blog1/><b>3.1. </b>Blog 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/3.2-blog2/ title="Blog 2" class=dd-item><a href=../../../vi/3-blogstranslated/3.2-blog2/><b>3.2. </b>Blog 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/3.3-blog3/ title="Blog 3" class="dd-item
active"><a href=../../../vi/3-blogstranslated/3.3-blog3/><b>3.3. </b>Blog 3
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/4-eventparticipated/ title="Các events đã tham gia" class=dd-item><a href=../../../vi/4-eventparticipated/><b>4. </b>Các events đã tham gia
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/4-eventparticipated/4.5-event5/ title="Event 5" class=dd-item><a href=../../../vi/4-eventparticipated/4.5-event5/><b>4.5. </b>Event 5
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.4-event4/ title="Event 4" class=dd-item><a href=../../../vi/4-eventparticipated/4.4-event4/><b>4.4. </b>Event 4
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.3-event3/ title="Event 3" class=dd-item><a href=../../../vi/4-eventparticipated/4.3-event3/><b>4.3. </b>Event 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.2-event2/ title="Event 2" class=dd-item><a href=../../../vi/4-eventparticipated/4.2-event2/><b>4.2. </b>Event 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.1-event1/ title="Event 1" class=dd-item><a href=../../../vi/4-eventparticipated/4.1-event1/><b>4.1. </b>Event 1
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/5-workshop/ title=Workshop class=dd-item><a href=../../../vi/5-workshop/><b>5. </b>Workshop
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-workshop/5.1-workshop-overview/ title="Giới thiệu" class=dd-item><a href=../../../vi/5-workshop/5.1-workshop-overview/><b>5.1. </b>Giới thiệu
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.2-prerequiste/ title="Các bước chuẩn bị" class=dd-item><a href=../../../vi/5-workshop/5.2-prerequiste/><b>5.2. </b>Các bước chuẩn bị
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.3-create-amplify/ title="Tạo backend với Amplify" class=dd-item><a href=../../../vi/5-workshop/5.3-create-amplify/><b>5.3. </b>Tạo backend với Amplify
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.4-aws-cognito/ title="Cấu hình AWS Cognito" class=dd-item><a href=../../../vi/5-workshop/5.4-aws-cognito/>5.4. Cấu hình AWS Cognito
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.5-create-ses/ title="Cấu hình Amazon SES để gửi email thông báo" class=dd-item><a href=../../../vi/5-workshop/5.5-create-ses/><b>5.5. </b>Cấu hình Amazon SES để gửi email thông báo
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.6-create-cloudwatch/ title="Cấu hình Amazon CloudWatch" class=dd-item><a href=../../../vi/5-workshop/5.6-create-cloudwatch/><b>5.6. </b>Cấu hình Amazon CloudWatch
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.7-create-iam-roles-policies/ title="IAM Roles & Policies" class=dd-item><a href=../../../vi/5-workshop/5.7-create-iam-roles-policies/><b>5.7. </b>IAM Roles & Policies
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.8-route-53/ title="Cấu hình Amazon Route 53" class=dd-item><a href=../../../vi/5-workshop/5.8-route-53/><b>5.8. </b>Cấu hình Amazon Route 53
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.9-cleanup/ title="Dọn dẹp tài nguyên" class=dd-item><a href=../../../vi/5-workshop/5.9-cleanup/><b>5.9. </b>Dọn dẹp tài nguyên
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/6-self-evaluation/ title="Tự đánh giá" class=dd-item><a href=../../../vi/6-self-evaluation/><b>6. </b>Tự đánh giá
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/7-feedback/ title="Chia sẻ, đóng góp ý kiến" class=dd-item><a href=../../../vi/7-feedback/><b>7. </b>Chia sẻ, đóng góp ý kiến
<i class="fas fa-check read-icon"></i></a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://www.facebook.com/groups/awsstudygroupfcj/><i class='fab fa-facebook'></i> AWS Study Group</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding><i class="fas fa-language fa-fw"></i><div class=select-style><select id=select-language onchange="location=this.value"><option id=en value=https://hd-2004.github.io/AWS_Fall2025_Workshop/3-blogstranslated/3.3-blog3/>English</option><option id=vi value=https://hd-2004.github.io/AWS_Fall2025_Workshop/vi/3-blogstranslated/3.3-blog3/ selected>Tiếng Việt</option></select><svg id="Capa_1" xmlns:xlink="http://www.w3.org/1999/xlink" width="255" height="255" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255"><g><g id="arrow-drop-down"><polygon points="0,63.75 127.5,191.25 255,63.75"/></g></g></svg></div></a></li><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></section><section id=footer><left><b>Workshop</b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title=Migrate alt="web counter" border=0></a><br><b><a href=https://cloudjourney.awsstudygroup.com/>Cloud Journey</a></b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" alt="web counter" border=0>
</left><left><br><br><b>Last Updated</b><br><i><span id=lastUpdated style=color:orange></span>
</i><script>const today=new Date,formattedDate=today.toLocaleDateString("en-GB");document.getElementById("lastUpdated").textContent=formattedDate</script></left><left><br><br><b>Team</b><br><i><a href=https://www.facebook.com/groups/660548818043427 style=color:orange>First Cloud Journey</a><br></i></left><script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i> </a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span> <span class=links><a href=../../../vi/>Báo cáo thực tập</a> > <a href=../../../vi/3-blogstranslated/>Các bài blogs đã dịch</a> > Blog 3</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><ul><li><a href=#giới-thiệu>Giới thiệu:</a></li><li><a href=#giới-thiệu-về-lambda-hooks>Giới thiệu về Lambda Hooks:</a></li><li><a href=#tổng-quan-giải-pháp>Tổng quan giải pháp:</a></li><li><a href=#kiến-trúc>Kiến trúc:</a></li><li><a href=#điều-kiện-tiên-quyết>Điều kiện tiên quyết:</a></li><li><a href=#quy-trình-thực-hiện>Quy trình thực hiện:</a></li><li><a href=#triển-khai-giải-pháp>Triển khai giải pháp</a></li><li><a href=#dọn-dẹp-tài-nguyên>Dọn dẹp tài nguyên:</a></li><li><a href=#kết-luận>Kết luận:</a></li><li><a href=#về-tác-giả>Về tác giả:</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Blog 3</h1><h1 id=validate-your-lambda-runtime-with-cloudformation-lambda-hooks>Validate Your Lambda Runtime with CloudFormation Lambda Hooks</h1><p>(Xác thực môi trường chạy Lambda của bạn bằng các lambda Hook trong CloudFormation.)</p><p>Tác Giả: Matteo Luigi Restelli và Stella Hie | Ngày 02 tháng 04 năm 2025 | Trong AWS CloudFormation, AWS Lambda, Configuration, compliance, and auditing, DevOps, Intermediate (200), Learning Levels, Management & Governance, Management Tools</p><h3 id=giới-thiệu>Giới thiệu:</h3><p>Bài viết này minh họa cách tận dụng AWS CloudFormation Lambda Hooks để áp dụng các quy tắc tuân thủ (compliance rules) ngay trong quá trình khởi tạo tài nguyên, cho phép bạn đánh giá và xác thực cấu hình của các hàm Lambda so với các chính sách tùy chỉnh trước khi triển khai. Thông thường, các chính sách này ảnh hưởng đến cách phần mềm được xây dựng, chẳng hạn như giới hạn phiên bản ngôn ngữ hoặc môi trường chạy (runtime). Một ví dụ điển hình là áp dụng các chính sách đó cho AWS Lambda — dịch vụ điện toán không máy chủ (serverless compute service) cho phép chạy mã mà không cần cung cấp hay quản lý máy chủ. Mặc dù AWS Lambda đã tự động xử lý việc ngừng hỗ trợ (deprecation) các môi trường chạy, ngăn bạn triển khai những runtime không còn được hỗ trợ, nhưng một số tổ chức vẫn cần tự thiết lập và thực thi các quy tắc tuân thủ riêng — những quy tắc không trực tiếp liên quan đến việc ngừng hỗ trợ một phiên bản ngôn ngữ cụ thể.</p><h3 id=giới-thiệu-về-lambda-hooks>Giới thiệu về Lambda Hooks:</h3><p>AWS CloudFormation Lambda Hooks là một tính năng mạnh mẽ cho phép các nhà phát triển đánh giá các thao tác của CloudFormation và AWS Cloud Control API thông qua mã tùy chỉnh được triển khai dưới dạng hàm Lambda. Khả năng này giúp kiểm tra cấu hình tài nguyên một cách chủ động trước khi khởi tạo, từ đó tăng cường bảo mật, tuân thủ quy định và hiệu quả vận hành.</p><p>Lambda Hooks cung cấp một cơ chế cho phép chặn (intercept) và đánh giá nhiều loại thao tác khác nhau trong AWS CloudFormation, bao gồm các thao tác trên tài nguyên (resource operations), trên stack, và trên change set (tính năng này cũng có thể được dùng với Cloud Control API, nhưng trong bài viết này chỉ tập trung vào CloudFormation). Khi bạn kích hoạt một Lambda Hook, CloudFormation sẽ tạo một mục đăng ký (entry) trong registry của tài khoản dưới dạng Private Hook, cho phép bạn cấu hình hook đó cho các tài khoản AWS và vùng (Region) cụ thể. Trong quá trình cấu hình Lambda Hooks, bạn có thể chỉ định một hoặc nhiều hàm Lambda sẽ được gọi trong quá trình đánh giá. Các hàm này có thể nằm trong cùng một tài khoản và vùng AWS với Hook, hoặc ở một tài khoản khác (miễn là bạn đã thiết lập quyền truy cập phù hợp). Quá trình đánh giá này diễn ra tại những thời điểm cụ thể trong vòng đời của CloudFormation Stack — ví dụ: trong quá trình tạo mới, cập nhật hoặc xóa stack. Lúc này, các hàm Lambda được cấu hình sẽ được gọi để đánh giá các thay đổi được đề xuất dựa trên các quy tắc tuân thủ (compliance rules) mà bạn đã xác định. Dựa trên kết quả đánh giá, hook có thể chặn thao tác hoặc phát cảnh báo, cho phép thao tác tiếp tục.</p><p>Lambda Hooks thực hiện việc đánh giá tài nguyên trước khi chúng được khởi tạo bởi CloudFormation, giúp tạo ra một lớp quản trị (governance layer) chủ động. Điều này có nghĩa là các tài nguyên không tuân thủ sẽ bị phát hiện và ngăn chặn trước khi triển khai, thay vì phải sửa chữa sau đó. Bằng cách tận dụng Lambda Hooks, các tổ chức có thể tự động hóa và tiêu chuẩn hóa quy trình kiểm tra tuân thủ trên tất cả các tài khoản và vùng AWS, giúp đảm bảo tính nhất quán và giảm bớt gánh nặng quản lý thủ công.</p><h3 id=tổng-quan-giải-pháp>Tổng quan giải pháp:</h3><p>Các phần sau đây minh họa một trường hợp sử dụng thực tế của AWS CloudFormation Lambda Hooks, tập trung vào việc thực thi các quy tắc tuân thủ (compliance rules) đối với các môi trường chạy (runtimes) của AWS Lambda.</p><p>Giới thiệu AnyCompany — một doanh nghiệp tiên phong với bộ quy tắc tuân thủ chặt chẽ trong hoạt động phát triển phần mềm. Trong số đó, có chính sách nghiêm ngặt về việc sử dụng các môi trường chạy AWS Lambda cụ thể.</p><p>Khi AnyCompany tiếp tục chuyển đổi sang kiến trúc serverless, họ gặp phải một thách thức: làm thế nào để ngăn việc triển khai các hàm Lambda sử dụng runtime không tuân thủ. Vì doanh nghiệp này sử dụng AWS CloudFormation để triển khai các hàm Lambda, AnyCompany mong muốn tận dụng sức mạnh của AWS CloudFormation Lambda Hooks để giải quyết vấn đề này.</p><p>Chúng ta sẽ tìm hiểu quy trình thiết lập, minh họa cách hoạt động của Hook, và thảo luận về ý nghĩa rộng hơn của việc duy trì tuân thủ trong môi trường điện toán đám mây năng động.</p><h3 id=kiến-trúc>Kiến trúc:</h3><p>Sơ đồ kiến trúc sau đây mô tả cách triển khai Lambda Hook. Trong mô hình này, AWS CloudFormation Lambda Hooks được sử dụng để chặn quá trình triển khai các hàm Lambda và thực hiện kiểm tra tính tuân thủ trên các tài nguyên đó.</p><p>Lambda Hook sẽ tương tác với một hàm AWS Lambda khác, hàm này chịu trách nhiệm thực hiện các bước kiểm tra tuân thủ.</p><p>Cuối cùng, hệ thống sử dụng AWS Systems Manager Parameter Store để lưu trữ tham số cấu hình (Configuration Parameter), chứa danh sách các môi trường chạy Lambda được phép sử dụng.</p><ol><li><p>Nhà phát triển (Developer) hoặc pipeline CI/CD triển khai một CloudFormation Stack có chứa các hàm Lambda.</p></li><li><p>CloudFormation sẽ gọi đến Lambda Hook tương ứng, hook này được cấu hình để chặn (intercept) các thao tác liên quan đến tài nguyên AWS Lambda. Trong trường hợp này, hook được thiết lập để “FAIL” (thất bại) quá trình triển khai nếu các bước kiểm tra không đạt yêu cầu.</p></li><li><p>Lambda Hook sẽ kiểm tra xem runtime của hàm Lambda có tuân thủ quy định của công ty hay không. Để làm điều này, nó so sánh runtime của hàm Lambda với danh sách các runtime được phép, danh sách này được lưu dưới dạng Parameter trong AWS Systems Manager Parameter Store. Lưu ý rằng trong ví dụ này, ta sử dụng SSM Parameter Store để lưu cấu hình, nhưng có thể dùng các dịch vụ khác như Amazon DynamoDB, AWS Secrets Manager, hoặc AppConfig.</p></li><li><p>Sau khi kiểm tra tính tuân thủ của runtime, Lambda Hook phản hồi lại:</p></li></ol><ul><li>Thất bại (failure): nếu runtime của Lambda không tuân thủ quy định.</li><li>Thành công (success): nếu runtime tuân thủ chính sách của công ty.</li></ul><ol start=5><li>Dựa theo phản hồi của Lambda Hook, quá trình triển khai CloudFormation sẽ được tiếp tực hoặc bị dừng lại.</li></ol><ul><li>hook-lambda: thư mục chứa toàn bộ nguồn code liên quan đến - CloudFormation Lambda Hook, bao gồm hàm Lambda dùng để kiểm tra (Validation Lambda Function) và mẫu CloudFormation.</li><li>sample: thư mục chứa sample code được sử dụng để kiểm thử - CloudFormation Lambda Hook.</li><li>deploy.sh: tập lệnh tiện ích (utility script) dùng để deploy giải pháp thông qua AWS CLI.</li><li>cleanup.sh: tập lệnh tiện ích dùng để dọn dẹp (clean up) hạ tầng - CloudFormation Hook trên AWS bằng AWS CLI.</li><li>template.yml: tệp mẫu CloudFormation (AWS CloudFormation Template) chứa toàn bộ các tài nguyên AWS được sử dụng trong giải pháp này.</li></ul><h3 id=điều-kiện-tiên-quyết>Điều kiện tiên quyết:</h3><p>Bạn phải thực hiện các điều kiện sau cho giải pháp:</p><ul><li>Tài khoản AWS — hoặc đăng ký để tạo và kích hoạt một tài khoản AWS mới.</li><li>Phần mềm cần cài đặt trên máy phát triển (development machine):</li><li>Cài đặt AWS Command Line Interface (AWS CLI) và cấu hình để kết nối với tài khoản AWS của bạn.</li><li>Cài đặt Node.js và sử dụng trình quản lý gói như npm.</li><li>Thông tin xác thực AWS (AWS credentials) phù hợp để tương tác với các tài nguyên trong tài khoản AWS của bạn.</li></ul><h3 id=quy-trình-thực-hiện>Quy trình thực hiện:</h3><h4 id=tạo-hàm-xác-thực-aws-lambda--mã-lambda-creating-the-aws-lambda-validation-function--lambda-code>Tạo hàm xác thực AWS Lambda – Mã Lambda (Creating the AWS Lambda Validation Function – Lambda Code)</h4><p>CloudFormation Lambda Hook sẽ tương tác với một hàm Lambda cụ thể (được gọi là Validation Lambda trong suốt phần còn lại của bài viết). Hàm này sẽ được gọi (invoke) trong quá trình CloudFormation thực hiện các thao tác CREATE hoặc UPDATE STACK có liên quan đến các hàm Lambda. Mục tiêu là kiểm tra xem các hàm Lambda này có sử dụng runtime tuân thủ quy định của AnyCompany hay không.</p><p>Dưới đây là mô tả chi tiết các bước mà Validation Lambda function handler thực hiện (mã được viết bằng TypeScript):</p><p>Validation Lambda trước tiên lấy giá trị biến môi trường (environment variable) — biến này chứa tên tham số (parameter name) trong AWS Systems Manager Parameter Store, nơi lưu danh sách các runtime tuân thủ (compliant runtimes list).
Tiếp theo, hàm thực hiện các bước kiểm tra an toàn (safety checks) để. Đảm bảo rằng chỉ các tài nguyên Lambda (Lambda Resources) mới được xem xét. Đảm bảo rằng thuộc tính Runtime của hàm Lambda được xác định rõ ràng.</p><p>Lưu ý: Hai bước kiểm tra an toàn trên về lý thuyết có thể bỏ qua, vì Hook đã được cấu hình chỉ để tương tác với tài nguyên Lambda, và thuộc tính Runtime của Lambda luôn là bắt buộc. Tuy nhiên, các bước này vẫn được giữ lại nhằm minh họa cách lấy thông tin từ sự kiện Lambda Hook (Lambda Hook event) trong handler của bạn.</p><pre tabindex=0><code>const parameterName = process.env.PERMITTED_RUNTIMES_PARAM;
if (!parameterName) {
	throw new Error(&#39;Permitted Runtimes Parameter is not set&#39;);
}

const resourceProperties = event.requestData.targetModel.resourceProperties;
// Check if this is a Lambda function resource
if (event.requestData.targetType !== &#39;AWS::Lambda::Function&#39;) {
console.log(&#34;Resource is not a Lambda function, skipping&#34;);
	return {
		hookStatus: &#39;SUCCESS&#39;,
		message: &#39;Not a Lambda function resource, skipping validation&#39;,
		clientRequestToken: event.clientRequestToken
	}
}

// Check runtime version compliance
const runtime = resourceProperties.Runtime;
if (!runtime) {
	console.log(&#34;Runtime not defined, failing&#34;);
	return {
		hookStatus: &#39;FAILURE&#39;,
		errorCode: &#39;NonCompliant&#39;,
		message: &#39;Runtime is required for Lambda functions&#39;,
		clientRequestToken: event.clientRequestToken
	}
}
</code></pre><p>Tiếp theo, Validation Lambda sẽ lấy giá trị của Tham số cấu hình (Configuration Parameter) từ AWS Systems Manager Parameter Store thông qua một lớp tiện ích (utility class) có tên là ParameterStoreService. Trong ví dụ của bài viết này, giá trị bên trong Tham số cấu hình là một danh sách các chuỗi (list of strings), trong đó mỗi chuỗi đại diện cho một giá trị runtime hợp lệ của AWS Lambda, ví dụ:</p><p>nodejs22.x, nodejs20.x, python3.11, python3.10, java17, java11, dotnet6</p><p>Sau khi lấy được giá trị này, Validation Lambda sẽ kiểm tra xem runtime của tài nguyên Lambda đang được triển khai có nằm trong danh sách runtime được phép hay không.Nếu runtime không tuân thủ (non-compliant) → hàm sẽ trả về phản hồi được định dạng đúng, trong đó hookStatus = FAILURE. Nếu runtime tuân thủ (compliant) → phản hồi sẽ chứa hookStatus = SUCCESS</p><pre tabindex=0><code>// Retrieve configuration from Parameter Store
const compliantRuntimes = await parameterStoreService.getParameterFromStore(parameterName);
// Check if Lambda runtime is permitted or not
if (!compliantRuntimes.includes(runtime)) {
console.log(&#34;Runtime &#34; + runtime + &#34; not compliant &#34;);
	return {
		hookStatus: &#39;FAILURE&#39;,
		errorCode: &#39;NonCompliant&#39;,
		message: `Runtime ${runtime} is not compliant. Please use one of: ${compliantRuntimes.join(&#39;, &#39;)}`,
		clientRequestToken: event.clientRequestToken
	}
}
return {
	hookStatus: &#39;SUCCESS&#39;,
	message: &#39;Runtime version compliance check passed&#39;,
	clientRequestToken: event.clientRequestToken
}
</code></pre><p>Để biết thêm thông tin về các giá trị phản hồi (response values) có thể có của CloudFormation Lambda Hooks Lambda, bạn có thể tham khảo liên kết được cung cấp.
Tạo hàm xác thực Lambda – Định nghĩa Lambda trong CloudFormation (Creating the validation Lambda – Lambda CloudFormation definition)</p><p>Hàm Validation Lambda sẽ được triển khai thông qua CloudFormation, trong cùng một Stack với: Định nghĩa CloudFormation Lambda Hook, và Tham số AWS Systems Manager Parameter Store. Dưới đây là một đoạn (fragment) trong mẫu CloudFormation Template mô tả cấu hình của Validation Lambda:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-YAML data-lang=YAML><span style=display:flex><span><span style=color:#75715e># Lambda Function</span>
</span></span><span style=display:flex><span><span style=color:#f92672>ValidationFunction</span>:
</span></span><span style=display:flex><span>	<span style=color:#f92672>Type</span>: <span style=color:#ae81ff>AWS::Lambda::Function</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>		<span style=color:#f92672>Handler</span>: <span style=color:#ae81ff>index.handler</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>Role</span>: !<span style=color:#ae81ff>GetAtt LambdaExecutionRole.Arn</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>Code</span>:
</span></span><span style=display:flex><span>			<span style=color:#f92672>S3Bucket</span>: !<span style=color:#ae81ff>Ref DeploymentBucket</span>
</span></span><span style=display:flex><span>			<span style=color:#f92672>S3Key</span>: <span style=color:#ae81ff>hook-lambda.zip</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>Runtime</span>: <span style=color:#ae81ff>nodejs22.x</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>Timeout</span>: <span style=color:#ae81ff>60</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>MemorySize</span>: <span style=color:#ae81ff>128</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>Environment</span>:
</span></span><span style=display:flex><span>			<span style=color:#f92672>Variables</span>:
</span></span><span style=display:flex><span>				<span style=color:#f92672>PERMITTED_RUNTIMES_PARAM</span>: !<span style=color:#ae81ff>Ref ParameterStoreParamName</span>
</span></span></code></pre></div><p>Bạn cần gán cho hàm Lambda với IAM (IAM role) có các quyền thích hợp để truy cập tham số (Parameter) trong AWS System Manager Parameter Store.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-YAML data-lang=YAML><span style=display:flex><span><span style=color:#75715e># Lambda Function Role</span>
</span></span><span style=display:flex><span><span style=color:#f92672>LambdaExecutionRole</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>AWS::IAM::Role</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>AssumeRolePolicyDocument</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>Version</span>: <span style=color:#e6db74>&#34;2012-10-17&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>Statement</span>:
</span></span><span style=display:flex><span>          - <span style=color:#f92672>Effect</span>: <span style=color:#ae81ff>Allow</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>Principal</span>:
</span></span><span style=display:flex><span>              <span style=color:#f92672>Service</span>: <span style=color:#ae81ff>lambda.amazonaws.com</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>Action</span>: <span style=color:#ae81ff>sts:AssumeRole</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>ManagedPolicyArns</span>:
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole</span>
</span></span><span style=display:flex><span><span style=color:#75715e># IAM Policy to access Parameter Store</span>
</span></span><span style=display:flex><span><span style=color:#f92672>ParameterStoreAccessPolicy</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>AWS::IAM::RolePolicy</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>RoleName</span>: !<span style=color:#ae81ff>Ref LambdaExecutionRole</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>PolicyName</span>: <span style=color:#ae81ff>ParameterStoreAccess</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>PolicyDocument</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>Version</span>: <span style=color:#e6db74>&#34;2012-10-17&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>Statement</span>:
</span></span><span style=display:flex><span>          - <span style=color:#f92672>Effect</span>: <span style=color:#ae81ff>Allow</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>Action</span>:
</span></span><span style=display:flex><span>              - <span style=color:#ae81ff>ssm:GetParameter</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>Resource</span>: !<span style=color:#ae81ff>Sub arn:aws:ssm:${AWS::Region}:${AWS::AccountId}:parameter${ParameterStoreParamName}</span>
</span></span></code></pre></div><p>Tạo CloudFormation Lambda Hook (Creating the CloudFormation Lambda Hook)
Ở bước này, bạn chỉ cần tạo một CloudFormation Lambda Hook phù hợp.
Hook này cần đáp ứng các yêu cầu sau:
Kích hoạt (activate) trong quá trình CREATE và UPDATE của CloudFormation.
Chỉ xem xét các tài nguyên CloudFormation loại AWS::Lambda::Function.
Thực thi trong giai đoạn “Pre-Provisioning” của CloudFormation Template (tức là trước khi tài nguyên được khởi tạo).
Áp dụng cho cả thao tác trên Stack và Resource (Stack và Resource Operations).
Gọi đến hàm Lambda Validation đã được định nghĩa từ trước.
Dưới đây là định nghĩa (definition) tương ứng trong CloudFormation Template:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-YAML data-lang=YAML><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Lambda Hook</span>
</span></span><span style=display:flex><span><span style=color:#f92672>ValidationHook</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>AWS::CloudFormation::LambdaHook</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>Alias</span>: <span style=color:#ae81ff>Private::Lambda::LambdaResourcesComplianceValidationHook</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>LambdaFunction</span>: !<span style=color:#ae81ff>GetAtt ValidationFunction.Arn</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>ExecutionRole</span>: !<span style=color:#ae81ff>GetAtt HookExecutionRole.Arn</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>FailureMode</span>: <span style=color:#ae81ff>FAIL</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>HookStatus</span>: <span style=color:#ae81ff>ENABLED</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>TargetFilters</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>Actions</span>:
</span></span><span style=display:flex><span>          - <span style=color:#ae81ff>CREATE</span>
</span></span><span style=display:flex><span>          - <span style=color:#ae81ff>UPDATE</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>InvocationPoints</span>:
</span></span><span style=display:flex><span>          - <span style=color:#ae81ff>PRE_PROVISION</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>TargetNames</span>:
</span></span><span style=display:flex><span>          - <span style=color:#ae81ff>AWS::Lambda::Function</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>TargetOperations</span>:
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>RESOURCE</span>
</span></span><span style=display:flex><span>        - <span style=color:#ae81ff>STACK</span>
</span></span></code></pre></div><p>Xin lưu ý rằng mẫu CloudFormation ở trên có tham chiếu đến một IAM Role, vì Hook cần có quyền truy cập thích hợp (proper permissions) để gọi đến hàm Lambda mục tiêu (target Lambda Function). Dưới đây là định nghĩa của IAM Role:</p><pre tabindex=0><code># Hook Execution Role
HookExecutionRole:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Version: &#34;2012-10-17&#34;
        Statement:
          - Effect: Allow
            Principal:
              Service: hooks.cloudformation.amazonaws.com
            Action: sts:AssumeRole

# IAM Policy for Lambda Invocation
LambdaInvokePolicy:
    Type: AWS::IAM::RolePolicy
    Properties:
      RoleName: !Ref HookExecutionRole
      PolicyName: LambdaInvokePolicy
      PolicyDocument:
        Version: &#34;2012-10-17&#34;
        Statement:
          - Effect: Allow
            Action:
              - lambda:InvokeFunction
            Resource: !GetAtt ValidationFunction.Arn
</code></pre><p>Cấu hình các runtime tuân thủ - Sử dụng Systems Manager Parameter Store</p><p>AWS Systems Manager Parameter Store là một dịch vụ lưu trữ phân cấp an toàn dành cho việc quản lý dữ liệu cấu hình và quản lý bí mật, cho phép người dùng lưu trữ và truy xuất dữ liệu như cấu hình, chuỗi cơ sở dữ liệu, v.v. dưới dạng giá trị tham số.</p><p>Trong ví dụ cụ thể này, chúng ta sẽ tận dụng Parameter Store để lưu trữ cấu hình thời gian chạy Lambda được phép. Giá trị cấu hình này là một tham số StringList, chứa danh sách các thời gian chạy được phép được phân tách bằng dấu phẩy. Dưới đây là đoạn mã mẫu CloudFormation định nghĩa Tham số:</p><pre tabindex=0><code># Parameter Store Parameter
ConfigParameter:
    Type: AWS::SSM::Parameter
    Properties:
      Name: !Ref ParameterStoreParamName
      Type: StringList
      Value: !Ref ParameterStoreDefaultValue
      Description: &#34;Configuration for Lambda Hook&#34;
</code></pre><p>Lưu ý: phần sử dụng tham số (parameters) trong CloudFormation cho các thuộc tính ‘Name’ và ‘Value’ giúp nhập giá trị một cách linh hoạt (dynamic input) khi triển khai (deploy) CloudFormation template.</p><h3 id=triển-khai-giải-pháp>Triển khai giải pháp</h3><p>Để triển khai (deploy) giải pháp này, bạn có thể sử dụng tập lệnh deploy.sh nằm trong thư mục gốc của repository.</p><p>Tập lệnh này sẽ thực hiện các bước sau:</p><ul><li>Biên dịch và build hàm Lambda Validation</li><li>Tạo một Amazon S3 Bucket để lưu trữ CloudFormation Template</li><li>Tải lên (upload) CloudFormation Template và mã nguồn Lambda lên S3 Bucket</li><li>Triển khai (deploy) CloudFormation Template</li></ul><p>Kiểm thử Lambda Hook (Testing the Lambda Hook)
Để kiểm thử CloudFormation Lambda Hook, bạn hãy triển khai một CloudFormation Template đơn giản chứa một hàm Lambda “Hello World”. Trước tiên, kiểm thử hàm Lambda được cấu hình với một runtime được phép (permitted runtime). Sau đó, sửa đổi template để cấu hình hàm Lambda với một runtime không tuân thủ (non-compliant runtime).
Dưới đây là định nghĩa ban đầu của CloudFormation Template dùng để kiểm thử:</p><pre tabindex=0><code># Lambda Function
HelloWorldFunction:
    Type: AWS::Lambda::Function
    Properties:
      FunctionName: hello-world-function
      Runtime: nodejs22.x
      Handler: index.handler
      Role: !GetAtt LambdaExecutionRole.Arn
      Code:
        ZipFile: |
          exports.handler = async (event, context) =&gt; {
              console.log(&#39;Hello World!&#39;);
              const response = {
                  statusCode: 200,
                  body: JSON.stringify(&#39;Hello World!&#39;)
              };
              return response;
          };
      Timeout: 30
</code></pre><p>Lưu ý rằng giá trị Runtime là nodejs22.x, hiện đang nằm trong danh sách các runtime được phép sử dụng. Do đó, kỳ vọng là quá trình triển khai (deployment) của hàm Lambda này sẽ thành công.
Triển khai mẫu template này bằng AWS CLI:</p><pre tabindex=0><code>aws cloudformation deploy \
  --template-file sample/template.yml \
  --stack-name hook-test \
  --capabilities CAPABILITY_IAM
</code></pre><p>Kiểm tra CloudFormation Console:</p><p>Đúng như mong đợi, quá trình triển khai đã thành công. Bạn cũng có thể thấy rằng CloudFormation Lambda Hook đã được kích hoạt, bằng cách kiểm tra CloudWatch Logs.</p><p>Bây giờ, hãy chỉnh sửa mẫu câu template gốc để thiết lập một Lambda Runtime không nằm trong danh sách các runtime được phép:</p><pre tabindex=0><code># Lambda Function
HelloWorldFunction:
    Type: AWS::Lambda::Function
    Properties:
      FunctionName: hello-world-function
      Runtime: nodejs18.x
      Handler: index.handler
      Role: !GetAtt LambdaExecutionRole.Arn
      Code:
        ZipFile: |
          exports.handler = async (event, context) =&gt; {
              console.log(&#39;Hello World!&#39;);
              const response = {
                  statusCode: 200,
                  body: JSON.stringify(&#39;Hello World!&#39;)
              };
              return response;
          };
      Timeout: 30
      MemorySize: 128
</code></pre><p>Triển khai mẫu này cùng AWS CLI với lệnh tương tự và kiểm tra CloudFormation Console:</p><p>Đúng như dự đoán, quá trình triển khai không thành công. CloudFormation Lambda Hook đã được kích hoạt, và vì Lambda Runtime không nằm trong danh sách các runtime được phép, nên việc triển khai đã bị chặn.
Bạn cũng có thể thấy rằng Hook đã thất bại trong CloudWatch Logs.</p><h3 id=dọn-dẹp-tài-nguyên>Dọn dẹp tài nguyên:</h3><p>Để xóa các tài nguyên liên quan đến mẫu thử nghiệm, bạn có thể chạy tập lệnh cleanup_sample.sh trong thư mục sample. Tập lệnh này sẽ xóa CloudFormation Template của mẫu thử nghiệm thông qua AWS CLI.</p><p>Để xóa các tài nguyên liên quan đến giải pháp chính được mô tả ở trên (dựa trên AWS CloudFormation Lambda Hook), bạn có thể sử dụng tập lệnh cleanup.sh trong thư mục gốc (root folder) của kho mã nguồn (repository). Tập lệnh này sẽ thực hiện các thao tác sau:</p><ul><li>Xóa CloudFormation Stack</li><li>Làm trống S3 Bucket được sử dụng cho quá trình triển khai Stack</li><li>Xóa S3 Bucket</li></ul><h3 id=kết-luận>Kết luận:</h3><p>Trong bài viết này, bạn đã tìm hiểu cách triển khai CloudFormation Hooks để đảm bảo tuân thủ (compliance) đối với Lambda runtime trong toàn bộ hạ tầng AWS của mình. Bằng cách tận dụng khả năng của Lambda Hook, bạn đã học được cách tạo cơ chế kiểm soát phòng ngừa nhằm xác thực cấu hình runtime của Lambda trước khi triển khai.</p><p>Bằng việc kích hoạt Lambda Hook và triển khai hàm Lambda tùy chỉnh để xác thực, bạn đã thiết lập được một cơ chế tự động đảm bảo rằng chỉ những runtime hợp lệ mới được sử dụng trong các hàm Lambda của tổ chức khi tạo hoặc cập nhật CloudFormation Stack. Giải pháp này có thể được tích hợp dễ dàng với các công cụ phát triển phổ biến như AWS CLI, AWS SAM, CI/CD pipelines, và AWS CDK, giúp đơn giản hóa việc áp dụng kiểm soát trong quy trình làm việc hiện tại, loại bỏ nhu cầu kiểm tra thủ công hoặc khắc phục sau triển khai.</p><p>Phương pháp xác thực được trình bày trong bài viết này không chỉ giới hạn ở Lambda runtimes, mà còn có thể mở rộng cho các tài nguyên AWS khác được CloudFormation hỗ trợ, giúp bạn áp dụng chính sách kiểm soát trên nhiều thành phần hạ tầng khác nhau trong môi trường AWS.</p><h3 id=về-tác-giả>Về tác giả:</h3><h4 id=matteo-luigi-restelli>Matteo Luigi Restelli</h4><p>Matteo Luigi Restelli là Kiến trúc sư Giải pháp Đối tác Cấp cao (Sr. Partner Solutions Architect) tại AWS. Ông chủ yếu làm việc với các đối tác tư vấn AWS tại Ý, và có chuyên môn trong các lĩnh vực như Hạ tầng dưới dạng mã (Infrastructure as Code), Phát triển ứng dụng gốc đám mây (Cloud Native App Development) và DevOps. Ngoài công việc, ông yêu thích bơi lội, âm nhạc rock & roll, và học hỏi điều mới mỗi ngày, đặc biệt là trong lĩnh vực Khoa học Máy tính.</p><h4 id=stella-hie>Stella Hie</h4><p>Stella Hie là Quản lý Sản phẩm Kỹ thuật Cấp cao (Sr. Product Manager Technical) phụ trách AWS Infrastructure as Code. Cô tập trung vào mảng kiểm soát chủ động và quản trị (proactive control and governance), với mục tiêu mang đến trải nghiệm tốt nhất cho khách hàng trong việc sử dụng các giải pháp AWS một cách an toàn. Ngoài công việc, cô yêu thích leo núi, chơi đàn piano, và xem các buổi biểu diễn trực tiếp (live shows).</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=../../../vi/3-blogstranslated/3.2-blog2/ title="Blog 2"><i class="fa fa-chevron-left"></i></a> <a class="nav nav-next" href=../../../vi/4-eventparticipated/ title="Các events đã tham gia" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=../../../js/clipboard.min.js?1765279076></script><script src=../../../js/perfect-scrollbar.min.js?1765279076></script><script src=../../../js/perfect-scrollbar.jquery.min.js?1765279076></script><script src=../../../js/jquery.sticky.js?1765279076></script><script src=../../../js/featherlight.min.js?1765279076></script><script src=../../../js/highlight.pack.js?1765279076></script><script>hljs.initHighlightingOnLoad()</script><script src=../../../js/modernizr.custom-3.6.0.js?1765279076></script><script src=../../../js/learn.js?1765279076></script><script src=../../../js/hugo-learn.js?1765279076></script><link href=../../../mermaid/mermaid.css?1765279076 rel=stylesheet><script src=../../../mermaid/mermaid.js?1765279076></script><script>mermaid.initialize({startOnLoad:!0})</script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,(e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date),(i=t.createElement(n),a=t.getElementsByTagName(n)[0]),i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-158079754-2","auto"),ga("send","pageview")</script></body></html>